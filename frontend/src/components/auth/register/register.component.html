<div class="form">
  <div class="form__box">
    <mat-card>
      <mat-card-header>
        <mat-card-title class="form__title">{{ "title.register" | translate }}</mat-card-title>
      </mat-card-header>

      <form [formGroup]="form" cdkTrapFocus [cdkTrapFocusAutoCapture]="true" (keyup.enter)="registerAsync()">
        <mat-card-content>
          <mat-form-field class="full-width" color="accent">
            <input
              formControlName="email"
              type="email"
              matInput
              placeholder="{{ 'input.email' | translate }}"
              cdkFocusInitial
              autocompleteOff
            />
            <mat-error *ngIf="form.get('email')?.hasError('required')">
              {{ "error.required" | translate }}
            </mat-error>
            <mat-error *ngIf="form.get('email')?.hasError('pattern')">
              {{ "error.email-invalid" | translate }}
            </mat-error>
            <mat-error *ngIf="form.get('email')?.hasError('minlength')">
              {{ "error.min-length" | translate: { value: 5 } }}
            </mat-error>
            <mat-error *ngIf="form.get('email')?.hasError('maxlength')">
              {{ "error.max-length" | translate: { value: 150 } }}
            </mat-error>
            <mat-error *ngIf="form.get('email')?.hasError('emailExists')">
              {{ "error.email-exists" | translate }}
            </mat-error>
          </mat-form-field>

          <mat-form-field class="full-width" color="accent">
            <input
              [type]="showPassword ? 'text' : 'password'"
              formControlName="password"
              matInput
              placeholder="{{ 'input.password' | translate }}"
              autocompleteOff
            />
            <mat-icon matSuffix (click)="togglePasswordVisibility($event, 'password')">
              {{ showPassword ? "visibility_off" : "visibility" }}
            </mat-icon>
            <mat-error *ngIf="form.get('password')?.hasError('required')">
              {{ "error.required" | translate }}
            </mat-error>
            <mat-error *ngIf="form.get('password')?.hasError('minlength')">
              {{ "error.min-length" | translate: { value: 8 } }}
            </mat-error>
            <mat-error *ngIf="form.get('password')?.hasError('maxlength')">
              {{ "error.max-length" | translate: { value: 150 } }}
            </mat-error>
            <mat-error *ngIf="form.get('password')?.hasError('hasIncremental')">
              {{ "error.has-incremental" | translate: { value: 4 } }}
            </mat-error>
            <mat-error *ngIf="form.get('password')?.hasError('hasSequential')">
              {{ "error.has-sequential" | translate: { value: 4 } }}
            </mat-error>
            <mat-error *ngIf="form.get('password')?.hasError('hasntCapitalized')">
              {{ "error.hasnt-capitalized" | translate }}
            </mat-error>
            <mat-error *ngIf="form.get('password')?.hasError('hasntNumber')">
              {{ "error.hasnt-number" | translate }}
            </mat-error>
            <mat-error *ngIf="form.get('password')?.hasError('hasntSpecialCharacter')">
              {{ "error.hasnt-special" | translate }}
            </mat-error>
          </mat-form-field>

          <mat-form-field class="full-width" color="accent">
            <input
              [type]="showConfirmPassword ? 'text' : 'password'"
              formControlName="confirmPassword"
              matInput
              placeholder="{{ 'input.confirm-password' | translate }}"
              autocompleteOff
            />
            <mat-icon matSuffix (click)="togglePasswordVisibility($event, 'confirmPassword')">
              {{ showConfirmPassword ? "visibility_off" : "visibility" }}
            </mat-icon>
            <mat-error *ngIf="form.get('confirmPassword')?.hasError('required')">
              {{ "error.required" | translate }}
            </mat-error>
            <mat-error *ngIf="form.get('confirmPassword')?.hasError('equalsTo')">
              {{ "error.match" | translate }}
            </mat-error>
          </mat-form-field>
        </mat-card-content>

        <button
          type="button"
          mat-raised-button
          color="primary"
          class="form__button"
          [disabled]="!form.dirty || !form.valid || isLoading"
          (click)="registerAsync()"
        >
          {{ "button.register" | translate }}
        </button>
      </form>
    </mat-card>
  </div>
</div>
